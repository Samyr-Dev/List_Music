<div class="container mx-auto">
  <h2 class="text-2xl font-semibold leading-7 text-gray-900 text-center">Listagem de Músicas</h2>

  <!-- Botão para adicionar nova música -->
  <div class="flex justify-end my-4">
    <button class="mx-2 bg-green-600 text-white font-medium p-2 rounded-md hover:bg-green-700" (click)="addNewMusic()">
      Adicionar Nova Música
    </button>
  </div>
  
  <!-- Botão para alternar entre Cards e Tabela -->
  <div class="flex justify-center my-4">
    <button class="mx-2 bg-indigo-600 text-white font-medium p-2 rounded-md hover:bg-indigo-700" (click)="viewMode = 'cards'">Cards</button>
    <button class="mx-2 bg-indigo-600 text-white font-medium p-2 rounded-md hover:bg-indigo-700" (click)="viewMode = 'table'">Tabela</button>
  </div>

  <!-- Exibição em Cards -->
  <div *ngIf="viewMode === 'cards'" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
    <mat-card *ngFor="let music of musicList" class="example-card shadow-custom" appearance="outlined">
      <mat-card-header>
        <div mat-card-avatar class="example-header-image"></div>
        <mat-card-title>{{ music.singer }}</mat-card-title>
        <mat-card-subtitle>{{ music.song }}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <p><strong>Gênero:</strong> {{ music.genre }}</p>
        <p><strong>Data de Registro:</strong> {{ music.registrationDate | date: 'yyyy-MM-dd':'UTC' }}</p>
      </mat-card-content>
      <mat-card-actions class="justify-center">
        <button mat-button class="bg-indigo-500 text-white p-2 rounded-md hover:bg-indigo-600" (click)="viewDetails(music._id)">DETALHES</button>
        <button mat-button class="bg-red-500 text-white p-2 rounded-md hover:bg-red-600" (click)="confirmDelete(music._id)">EXCLUIR</button>
      </mat-card-actions>
    </mat-card>
  </div>  

  <!-- Exibição em Tabela -->
  <div *ngIf="viewMode === 'table'" class="overflow-x-auto">
    <table mat-table [dataSource]="musicList" class="min-w-full bg-white shadow-md rounded-lg">
      <!-- Coluna Cantor -->
      <ng-container matColumnDef="singer">
        <th mat-header-cell *matHeaderCellDef> Cantor </th>
        <td mat-cell *matCellDef="let music"> {{ music.singer }} </td>
      </ng-container>

      <!-- Coluna Música -->
      <ng-container matColumnDef="song">
        <th mat-header-cell *matHeaderCellDef> Música </th>
        <td mat-cell *matCellDef="let music"> {{ music.song }} </td>
      </ng-container>

      <!-- Coluna Gênero -->
      <ng-container matColumnDef="genre">
        <th mat-header-cell *matHeaderCellDef> Gênero </th>
        <td mat-cell *matCellDef="let music"> {{ music.genre }} </td>
      </ng-container>

      <!-- Coluna Data de Registro -->
      <ng-container matColumnDef="registrationDate">
        <th mat-header-cell *matHeaderCellDef> Data_Registro </th>
        <td mat-cell *matCellDef="let music"> {{ music.registrationDate | date: 'yyyy-MM-dd':'UTC' }} </td>
      </ng-container>

      <!-- Coluna para Ações -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef> Ações </th>
        <td mat-cell *matCellDef="let music">
          <!-- Botão para ver detalhes -->
          <button class="bg-indigo-500 text-white p-2 rounded-md hover:bg-indigo-600" (click)="viewDetails(music._id)">
            Detalhes
          </button>
          <!-- Botão de exclusão -->
          <button class="bg-red-500 text-white p-2 rounded-md hover:bg-red-600"
                  (click)="confirmDelete(music._id)">
            Excluir
          </button>
        </td>
      </ng-container>

      <!-- Cabeçalhos da Tabela -->
      <tr mat-header-row *matHeaderRowDef="displayedColumns.concat(['actions'])"></tr>
      <!-- Linhas da Tabela -->
      <tr mat-row *matRowDef="let row; columns: displayedColumns.concat(['actions'])"></tr>
    </table>
  </div>
</div>
